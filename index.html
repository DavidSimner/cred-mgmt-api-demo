<!DOCTYPE html>
<html>
<head>
    <title>Credential Management API Demo</title>
</head>
<body>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

	<form>
		<input type="email"    name="email"    autocomplete="username" />
		<input type="password" name="password" autocomplete="current-password" />
		<input type="submit"   value="Log in" />
	</form>

	<script>
		$('form').submit(function (e) {
			e.preventDefault();

			fetch('https://cred-mgmt-api-demo.azurewebsites.net/api/tokens', {
				method: 'POST',
				body: new FormData(this)
			}).then(function (response) {
				var data = JSON.parse(response);
				var cred = new PasswordCredential(data);
				navigator.credentials.store(cred);
			});
		});

		navigator.credentials.get({ password: true }).then(function (cred) {
			if (cred)
			{
				fetch('https://cred-mgmt-api-demo.azurewebsites.net/api/sessions', {
					method: 'POST',
					credentials: cred
				}).then(function (response) {

				});
			}
		});
	</script>
</body>
</html>
