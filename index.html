<!DOCTYPE html>
<html>
<head>
    <title>Credential Management API Demo</title>
</head>
<body>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

	<form>
		<input type="email"    name="email"    autocomplete="username" />
		<input type="password" name="password" autocomplete="current-password" />
		<input type="submit"   value="Log in" />
	</form>

	<script>
		$('form').submit(function (e) {
			e.preventDefault();

			var request = new XMLHttpRequest();
			request.open('POST', 'https://cred-mgmt-api-demo.azurewebsites.net/api/tokens');
			request.onload = function () {
				var data = JSON.parse(request.responseText);
				var cred = new PasswordCredential(data);
				navigator.credentials.store(cred);
			};
			request.send(new FormData(this));
		});

		navigator.credentials.get({}).then(function (goo, b, c) {
			log(goo);
		}, function (bar, b, c) {
			log(goo);
		});
	</script>
</body>
</html>
